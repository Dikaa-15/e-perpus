<div class="flex min-h-full flex-col justify-center px-6 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-md">
    <div class="bg-white py-6 px-4 shadow-xl rounded-lg sm:px-10">
      <div class="sm:mx-auto sm:w-full sm:max-w-md">
        <div class="text-center mb-8">
          <div
            class="inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full shadow-lg mb-4"
          >
            <i class="fas fa-book text-2xl text-blue-600"></i>
          </div>
          <h2 class="text-3xl font-bold text-gray-900">Daftar Akun Baru</h2>
          <p class="mt-2 text-gray-600">Bergabunglah dengan E-Perpustakaan</p>
        </div>
      </div>
      <form
        class="space-y-6"
        action="/auth/register"
        method="POST"
        id="registerForm"
      >
        <!-- Name Field -->
        <div>
          <label
            for="name"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-user mr-2"></i>Nama Lengkap
          </label>
          <div class="mt-2">
            <input
              id="name"
              name="name"
              type="text"
              required
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
              placeholder="Masukkan nama lengkap Anda"
            />
          </div>
        </div>

        <!-- Email Field -->
        <div>
          <label
            for="email"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-envelope mr-2"></i>Email
          </label>
          <div class="mt-2">
            <input
              id="email"
              name="email"
              type="email"
              autocomplete="email"
              required
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
              placeholder="Masukkan email Anda"
            />
          </div>
        </div>

        <!-- Password Field -->
        <div>
          <label
            for="password"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-lock mr-2"></i>Password
          </label>
          <div class="mt-2 relative">
            <input
              id="password"
              name="password"
              type="password"
              autocomplete="new-password"
              required
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3 pr-10"
              placeholder="Masukkan password Anda"
            />
            <button
              type="button"
              onclick="togglePassword('password', 'toggleIcon1')"
              class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
            >
              <i class="fas fa-eye" id="toggleIcon1"></i>
            </button>
          </div>
        </div>

        <!-- Phone Field -->
        <div>
          <label
            for="phone"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-phone mr-2"></i>Nomor Telepon
          </label>
          <div class="mt-2">
            <input
              id="phone"
              name="phone"
              type="tel"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
              placeholder="Masukkan nomor telepon"
            />
          </div>
        </div>

        <!-- NIK Field -->
        <div>
          <label
            for="nik"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-id-card mr-2"></i>NIK
          </label>
          <div class="mt-2">
            <input
              id="nik"
              name="nik"
              type="text"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
              placeholder="Masukkan NIK"
            />
          </div>
        </div>

        <!-- Address Field -->
        <div>
          <label
            for="address"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-map-marker-alt mr-2"></i>Alamat
          </label>
          <div class="mt-2">
            <textarea
              id="address"
              name="address"
              rows="3"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
              placeholder="Masukkan alamat lengkap"
            ></textarea>
          </div>
        </div>

        <!-- Date of Birth Field -->
        <div>
          <label
            for="date_of_birth"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-calendar mr-2"></i>Tanggal Lahir
          </label>
          <div class="mt-2">
            <input
              id="date_of_birth"
              name="date_of_birth"
              type="date"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
            />
          </div>
        </div>

        <!-- Gender Field -->
        <div>
          <label
            for="gender"
            class="block text-sm font-medium leading-6 text-gray-900"
          >
            <i class="fas fa-venus-mars mr-2"></i>Jenis Kelamin
          </label>
          <div class="mt-2">
            <select
              id="gender"
              name="gender"
              class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6 px-3"
            >
              <option value="">Pilih Jenis Kelamin</option>
              <option value="male">Laki-laki</option>
              <option value="female">Perempuan</option>
            </select>
          </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="flex items-start">
          <input
            id="terms"
            name="terms"
            type="checkbox"
            required
            class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"
          />
          <label for="terms" class="ml-2 block text-sm text-gray-900">
            Saya setuju dengan
            <a href="#" class="text-primary hover:text-primary-dark"
              >Syarat dan Ketentuan</a
            >
            serta
            <a href="#" class="text-primary hover:text-primary-dark"
              >Kebijakan Privasi</a
            >
          </label>
        </div>

        <!-- Register Button -->
        <div>
          <button
            type="submit"
            class="flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-primary-dark focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary transition duration-300"
          >
            <i class="fas fa-user-plus mr-2"></i>Daftar Sekarang
          </button>
        </div>
      </form>

      <!-- Login Link -->
      <p class="mt-10 text-center text-sm text-gray-500">
        Sudah punya akun?
        <a
          href="/auth/login"
          class="font-semibold leading-6 text-primary hover:text-primary-dark"
          >Masuk di sini</a
        >
      </p>
    </div>
  </div>
</div>

<!-- Flash Messages Data -->
<div id="flashData" style="display: none">
  <% if (typeof error !== 'undefined' && error && error.length > 0) { %>
  <span data-type="error" data-message="<%= error[0] %>"></span>
  <% } %> <% if (typeof success !== 'undefined' && success && success.length >
  0) { %>
  <span data-type="success" data-message="<%= success[0] %>"></span>
  <% } %>
</div>

<script>
  function togglePassword(fieldId, iconId) {
    const passwordField = document.getElementById(fieldId);
    const toggleIcon = document.getElementById(iconId);

    if (passwordField.type === "password") {
      passwordField.type = "text";
      toggleIcon.classList.remove("fa-eye");
      toggleIcon.classList.add("fa-eye-slash");
    } else {
      passwordField.type = "password";
      toggleIcon.classList.remove("fa-eye-slash");
      toggleIcon.classList.add("fa-eye");
    }
  }

  // Show flash messages
  document.addEventListener("DOMContentLoaded", function () {
    const flashData = document.getElementById("flashData");
    const errorSpan = flashData.querySelector('[data-type="error"]');
    const successSpan = flashData.querySelector('[data-type="success"]');

    if (errorSpan) {
      Swal.fire({
        icon: "error",
        title: "Oops...",
        text: errorSpan.getAttribute("data-message"),
        confirmButtonColor: "#FFB823",
      });
    }

    if (successSpan) {
      Swal.fire({
        icon: "success",
        title: "Berhasil!",
        text: successSpan.getAttribute("data-message"),
        confirmButtonColor: "#FFB823",
      });
    }
  });

  // Form validation
  document
    .getElementById("registerForm")
    .addEventListener("submit", function (e) {
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const terms = document.getElementById("terms").checked;

      if (!name || !email || !password) {
        e.preventDefault();
        Swal.fire({
          icon: "warning",
          title: "Peringatan",
          text: "Mohon lengkapi field yang wajib diisi!",
          confirmButtonColor: "#FFB823",
        });
        return;
      }

      if (password.length < 6) {
        e.preventDefault();
        Swal.fire({
          icon: "warning",
          title: "Peringatan",
          text: "Password minimal 6 karakter!",
          confirmButtonColor: "#FFB823",
        });
        return;
      }

      if (!terms) {
        e.preventDefault();
        Swal.fire({
          icon: "warning",
          title: "Peringatan",
          text: "Mohon setujui syarat dan ketentuan!",
          confirmButtonColor: "#FFB823",
        });
        return;
      }
    });
</script>
